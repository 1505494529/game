<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>复制本地图片到剪贴板</title>
    <style>
        /* 样式与之前版本相同，为了简洁此处省略 */
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; background-color: #f4f7f6; color: #333; margin: 0; padding: 20px; }
        h1 { text-align: center; color: #2c3e50; }
        .image-gallery { display: flex; flex-wrap: wrap; justify-content: center; gap: 25px; padding: 20px; }
        .image-card { background-color: #ffffff; border-radius: 10px; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); overflow: hidden; text-align: center; transition: transform 0.3s ease, box-shadow 0.3s ease; width: 300px; }
        .image-card:hover { transform: translateY(-5px); box-shadow: 0 8px 16px rgba(0, 0, 0, 0.15); }
        .image-card img { width: 100%; height: 200px; object-fit: cover; display: block; }
        .button-container { padding: 15px; }
        .copy-button { background-color: #3498db; color: white; border: none; padding: 10px 20px; font-size: 16px; border-radius: 5px; cursor: pointer; transition: background-color 0.3s ease; width: 100%; }
        .copy-button:hover { background-color: #2980b9; }
        .copy-button.copied { background-color: #2ecc71; }
    </style>
</head>
<body>

    <h1>图片画廊与复制功能 (本地图片)</h1>

    <div class="image-gallery">
        <!-- 图片卡片 1 -->
        <div class="image-card">
            <img src="1.png" alt="示例图片1">
            <div class="button-container">
                <button class="copy-button" onclick="copyImageToClipboard(this, '1.png')">复制图片</button>
            </div>
        </div>

        <!-- 图片卡片 2 -->
        <div class="image-card">
            <img src="2.png" alt="示例图片2">
            <div class="button-container">
                <button class="copy-button" onclick="copyImageToClipboard(this, '2.png')">复制图片</button>
            </div>
        </div>

        <!-- 图片卡片 3 -->
        <div class="image-card">
            <img src="3.png" alt="示例图片3">
            <div class="button-container">
                <button class="copy-button" onclick="copyImageToClipboard(this, '3.png')">复制图片</button>
            </div>
        </div>

        <!-- 图片卡片 4 -->
        <div class="image-card">
            <img src="4.png" alt="示例图片4">
            <div class="button-container">
                <button class="copy-button" onclick="copyImageToClipboard(this, '4.png')">复制图片</button>
            </div>
        </div>

        <!-- 图片卡片 5 -->
        <div class="image-card">
            <img src="5.png" alt="示例图片5">
            <div class="button-container">
                <button class="copy-button" onclick="copyImageToClipboard(this, '5.png')">复制图片</button>
            </div>
        </div>
    </div>

    <script>
        // JavaScript 逻辑与之前版本完全相同，无需修改。
        // 它已经可以处理相对路径，只要页面是通过 HTTP(S) 协议提供服务的。
        async function copyImageToClipboard(buttonElement, imageUrl) {
            if (!navigator.clipboard || !navigator.clipboard.write) {
                alert('您的浏览器不支持 Clipboard API，无法复制图片。');
                return;
            }

            try {
                // fetch API 可以很好地处理相对路径
                const response = await fetch(imageUrl);
                if (!response.ok) {
                    throw new Error(`无法加载图片: ${response.statusText}`);
                }
                const blob = await response.blob();

                const clipboardItem = new ClipboardItem({
                    [blob.type]: blob
                });

                await navigator.clipboard.write([clipboardItem]);

                console.log('图片已成功复制到剪贴板！');
                const originalText = buttonElement.textContent;
                buttonElement.textContent = '已复制!';
                buttonElement.classList.add('copied');

                setTimeout(() => {
                    buttonElement.textContent = originalText;
                    buttonElement.classList.remove('copied');
                }, 2000);

            } catch (error) {
                console.error('复制图片失败:', error);
                alert('复制图片失败。请确保您是通过本地服务器访问此页面，并检查控制台获取更多信息。');
            }
        }
    </script>

</body>
</html>